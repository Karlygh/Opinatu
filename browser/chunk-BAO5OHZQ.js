import{a as U}from"./chunk-RUZO6WAS.js";import{a as G,b as z,e as W,g as j,k as Y,l as B,o as L}from"./chunk-LVDRX4YC.js";import{f as D}from"./chunk-66KRX256.js";import{a as R}from"./chunk-HVYXXNEE.js";import"./chunk-IXDJKJJB.js";import{Aa as x,Cb as w,Db as O,Eb as y,Fa as v,Ja as f,Qa as g,Ra as h,Sa as o,Ta as i,Ua as A,Va as _,Wa as m,Xa as d,Y as E,Ya as V,Z as u,_ as b,a as S,b as F,cb as a,db as H,ea as I,eb as p,fb as N,gb as C,hb as P,ib as M,ua as T,wa as r}from"./chunk-7X4BFSSS.js";function Q(c,n){if(c&1){let e=_();o(0,"button",5),m("click",function(){let s=u(e).$implicit,l=d();return b(l.filtrarPorGenero(s))}),a(1),i()}if(c&2){let e=n.$implicit,t=d();h("active",e===t.generoSeleccionado),r(),p(" ",e," ")}}function X(c,n){if(c&1){let e=_();o(0,"button",6),m("click",function(){u(e);let s=d();return b(s.limpiarFiltro())}),a(1," Limpiar filtro "),i()}}var k=class c{peliculas=[];peliculasFiltradas=new I;generosDisponibles=[];generoSeleccionado="";ngOnChanges(){this.peliculas.length&&this.extraerGenerosUnicos()}extraerGenerosUnicos(){let n=this.peliculas.flatMap(e=>e.genre);this.generosDisponibles=[...new Set(n)].sort()}filtrarPorGenero(n){this.generoSeleccionado=n;let e=n?this.peliculas.filter(t=>t.genre.includes(n)):this.peliculas;this.peliculasFiltradas.emit(e)}limpiarFiltro(){this.generoSeleccionado="",this.peliculasFiltradas.emit(this.peliculas)}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=v({type:c,selectors:[["app-filtro-genero"]],inputs:{peliculas:"peliculas"},outputs:{peliculasFiltradas:"peliculasFiltradas"},features:[E],decls:6,vars:2,consts:[[1,"filtro-genero-container","mb-4"],[1,"d-flex","flex-wrap","align-items-center","gap-3"],[1,"text-warning","mb-0"],["class","btn btn-outline-warning btn-sm",3,"active","click",4,"ngFor","ngForOf"],["class","btn btn-warning btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-outline-warning","btn-sm",3,"click"],[1,"btn","btn-warning","btn-sm",3,"click"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Filtrar por g\xE9nero:"),i(),f(4,Q,2,3,"button",3)(5,X,2,0,"button",4),i()()),e&2&&(r(4),g("ngForOf",t.generosDisponibles),r(),g("ngIf",t.generoSeleccionado))},dependencies:[y,w,O],styles:[".filtro-genero-container[_ngcontent-%COMP%]{padding:1rem;background-color:#00000080;border-radius:8px}.btn-outline-warning.active[_ngcontent-%COMP%]{background-color:#ffc107;color:#000;font-weight:700}"]})};function Z(c,n){if(c&1&&(o(0,"li",43)(1,"strong"),a(2),i(),a(3),o(4,"strong"),a(5),i()()),c&2){let e=n.$implicit;r(2),p("",e.name,":"),r(),p(" ",e.opinion," "),r(2),p("(",e.nota,"/10)")}}function ee(c,n){if(c&1){let e=_();o(0,"div",38)(1,"h5"),a(2,"Opiniones:"),i(),o(3,"ul",39),f(4,Z,6,3,"li",40),i(),o(5,"div",41)(6,"button",42),m("click",function(){u(e);let s=d().$implicit,l=d();return b(l.verDetalles(s.id))}),a(7," M\xE1s Informaci\xF3n "),i()()()}if(c&2){let e=d().$implicit;r(4),g("ngForOf",e.opinions)}}function te(c,n){if(c&1){let e=_();o(0,"div",31)(1,"div",32)(2,"h2",33),a(3),i(),A(4,"img",34),o(5,"p")(6,"strong"),a(7,"Director:"),i(),a(8),i(),o(9,"p")(10,"strong"),a(11,"G\xE9nero:"),i(),a(12),i(),o(13,"p")(14,"strong"),a(15,"Fecha:"),i(),a(16),i(),o(17,"p")(18,"strong"),a(19,"Clasificaci\xF3n:"),i(),o(20,"span",35),a(21),i()(),o(22,"button",36),m("click",function(){let s=u(e).$implicit,l=d();return b(l.seleccionarPeli(s))}),a(23," A\xF1adir opini\xF3n "),i(),f(24,ee,8,1,"div",37),i()()}if(c&2){let e=n.$implicit;r(3),N("",e.title," (",e.year,")"),r(),V("alt",e.title),g("src",e.imageUrl,T),r(4),p(" ",e.director,""),r(4),p(" ",e.genre.join(", "),""),r(4),p(" ",e.year,""),r(5),H(e.rating),r(3),g("ngIf",e.opinions==null?null:e.opinions.length)}}function ne(c,n){if(c&1){let e=_();o(0,"li",26)(1,"a",44),m("click",function(){let s=u(e).$implicit,l=d();return b(l.cambiarPagina(s))}),a(2),i()()}if(c&2){let e=n.$implicit,t=d();h("active",e===t.paginaActual),r(2),p(" ",e," ")}}var $=class c{constructor(n,e,t){this.peliculaService=n;this.opinionesService=e;this.router=t}peliculas=[];peliculasFiltradas=[];peliculasPagina=[];paginaActual=1;peliculasPorPagina=6;totalPaginas=0;nombre="";opinion="";nota=0;peliSeleccionada=null;id=0;ngOnInit(){this.peliculaService.getPeliculas().subscribe({next:n=>{this.peliculas=n.movies.map((e,t)=>F(S({},e),{id:e.id??t})),this.peliculasFiltradas=[...this.peliculas],this.inicializarPaginacion()},error:n=>console.error(n)})}onPeliculasFiltradas(n){this.peliculasFiltradas=n,this.paginaActual=1,this.inicializarPaginacion()}inicializarPaginacion(){this.totalPaginas=Math.ceil(this.peliculasFiltradas.length/this.peliculasPorPagina),this.actualizarPeliculasPagina()}actualizarPeliculasPagina(){let n=(this.paginaActual-1)*this.peliculasPorPagina,e=n+this.peliculasPorPagina;this.peliculasPagina=this.peliculasFiltradas.slice(n,e)}cambiarPagina(n){n>0&&n<=this.totalPaginas&&(this.paginaActual=n,this.actualizarPeliculasPagina(),document.querySelector(".container")?.scrollIntoView({behavior:"smooth",block:"start"}))}getRangoPaginas(){let n=[],t=Math.max(1,this.paginaActual-Math.floor(2.5)),s=Math.min(this.totalPaginas,t+5-1);s-t+1<5&&(t=Math.max(1,s-5+1));for(let l=t;l<=s;l++)n.push(l);return n}seleccionarPeli(n){this.peliSeleccionada=n,this.nombre="",this.opinion="",this.nota=0}enviar(){if(this.nombre&&this.opinion&&this.peliSeleccionada&&this.nota>=1&&this.nota<=10){let n={name:this.nombre,opinion:this.opinion,nota:this.nota,titulo:this.peliSeleccionada.title};console.log("Opini\xF3n a enviar al servicio:",n),this.opinionesService.agregarOpinion(n),this.router.navigate(["/mis-opiniones"]),this.nombre="",this.opinion="",this.nota=0,this.peliSeleccionada=null}else alert("Por favor, completa todos los campos, incluyendo la nota (1-10).")}verDetalles(n){n?this.router.navigate([`/details-list/${n}`]):console.error("ID de pel\xEDcula inv\xE1lido")}static \u0275fac=function(e){return new(e||c)(x(R),x(U),x(D))};static \u0275cmp=v({type:c,selectors:[["app-home"]],decls:45,vars:11,consts:[[1,"text-center","text-warning","mb-5"],[1,"container","mb-4"],[3,"peliculasFiltradas","peliculas"],[1,"container"],[1,"row","g-4","align-items-stretch"],["class","col-12 col-md-6 col-lg-4",4,"ngFor","ngForOf"],["id","opinionModal","tabindex","-1","aria-labelledby","opinionModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","border-warning","d-flex","justify-content-center","position-relative"],["id","opinionModalLabel",1,"modal-title","text-center","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","position-absolute","end-0","me-2",2,"filter","invert(1) grayscale(100%) brightness(200%)"],[1,"modal-body"],[1,"mb-3"],["for","inputNombre",1,"form-label"],["type","text","id","inputNombre","placeholder","Tu nombre",1,"form-control","bg-secondary","text-white","border-secondary",3,"ngModelChange","ngModel"],["for","textareaOpinion",1,"form-label"],["id","textareaOpinion","rows","3","placeholder","Tu opini\xF3n",1,"form-control","bg-secondary","text-white","border-secondary",3,"ngModelChange","ngModel"],["for","inputNota",1,"form-label"],["type","number","id","inputNota","min","1","max","10","placeholder","Tu nota (1-10)",1,"form-control","bg-secondary","text-white","border-secondary",3,"ngModelChange","ngModel"],[1,"modal-footer","border-warning"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-warning"],["type","button","data-bs-dismiss","modal",1,"btn","btn-warning",3,"click"],[1,"d-flex","justify-content-center","mt-4"],["aria-label","Page navigation"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link","bg-dark","text-warning","border-warning",3,"click"],[1,"col-12","col-md-6","col-lg-4"],[1,"movie-card","bg-dark","text-white","p-3","rounded","shadow","h-100","d-flex","flex-column",2,"min-height","450px"],[1,"h5"],[1,"img-fluid","rounded","mb-2","movie-poster",3,"src","alt"],[1,"fw-bold","mx-1"],["data-bs-toggle","modal","data-bs-target","#opinionModal",1,"btn","btn-warning","mt-auto","movie-button",3,"click"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"list-group"],["class","list-group-item bg-dark text-white border-light",4,"ngFor","ngForOf"],[1,"text-center","mt-2"],[1,"btn","btn-outline-light","movie-button",3,"click"],[1,"list-group-item","bg-dark","text-white","border-light"],[1,"page-link","bg-dark","text-warning","border-warning",3,"click"]],template:function(e,t){e&1&&(o(0,"h1",0),a(1,"Pel\xEDculas"),i(),o(2,"div",1)(3,"app-filtro-genero",2),m("peliculasFiltradas",function(l){return t.onPeliculasFiltradas(l)}),i()(),o(4,"div",3)(5,"div",4),f(6,te,25,9,"div",5),i()(),o(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"h5",10),a(12),i(),o(13,"button",11),a(14," \xD7 "),i()(),o(15,"div",12)(16,"div",13)(17,"label",14),a(18,"Usuario"),i(),o(19,"input",15),M("ngModelChange",function(l){return P(t.nombre,l)||(t.nombre=l),l}),i()(),o(20,"div",13)(21,"label",16),a(22,"Escribe tu opini\xF3n"),i(),o(23,"textarea",17),M("ngModelChange",function(l){return P(t.opinion,l)||(t.opinion=l),l}),i()(),o(24,"div",13)(25,"label",18),a(26,"Punt\xFAa de 1 a 10"),i(),o(27,"input",19),M("ngModelChange",function(l){return P(t.nota,l)||(t.nota=l),l}),i()()(),o(28,"div",20)(29,"button",21),a(30,"Cancelar"),i(),o(31,"button",22),m("click",function(){return t.enviar()}),a(32,"Enviar"),i()()()()(),o(33,"div",23)(34,"nav",24)(35,"ul",25)(36,"li",26)(37,"a",27),m("click",function(){return t.cambiarPagina(t.paginaActual-1)}),o(38,"span",28),a(39,"\xAB"),i()()(),f(40,ne,3,3,"li",29),o(41,"li",26)(42,"a",30),m("click",function(){return t.cambiarPagina(t.paginaActual+1)}),o(43,"span",28),a(44,"\xBB"),i()()()()()()),e&2&&(r(3),g("peliculas",t.peliculas),r(3),g("ngForOf",t.peliculasPagina),r(6),p("Opini\xF3n sobre ",t.peliSeleccionada==null?null:t.peliSeleccionada.title,""),r(7),C("ngModel",t.nombre),r(4),C("ngModel",t.opinion),r(4),C("ngModel",t.nota),r(9),h("disabled",t.paginaActual===1),r(4),g("ngForOf",t.getRangoPaginas()),r(),h("disabled",t.paginaActual===t.totalPaginas))},dependencies:[y,w,O,L,G,j,z,B,Y,W,k],styles:['h1[_ngcontent-%COMP%]{font-size:3rem;text-align:center;color:#f7c948;margin-bottom:2rem}h2[_ngcontent-%COMP%]{color:#f0f0f0;margin-bottom:.5rem}h2[_ngcontent-%COMP%]:hover, strong[_ngcontent-%COMP%]{color:#f7c948}p[_ngcontent-%COMP%]{margin:.3rem 0}img[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;border-radius:10px;border:3px solid #444}.movie-card[_ngcontent-%COMP%]:hover   h2[_ngcontent-%COMP%]{text-align:center;text-shadow:0 0 5px #f7c948,0 0 10px #f7c948}.pelicula-card[_ngcontent-%COMP%]{background:#2c2c3e;padding:1.5rem;margin-bottom:2rem;border-radius:12px;box-shadow:0 4px 10px #0006;transition:transform .3s ease,box-shadow .3s ease}.pelicula-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 14px #0009}.movie-card[_ngcontent-%COMP%]{transition:all .3s ease;transform:translateY(0);box-shadow:0 4px 8px #0003;border:1px solid rgba(255,193,7,.3)}.movie-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 12px 24px #ffc10733;border:1px solid rgba(255,193,7,.6);z-index:10}.movie-poster[_ngcontent-%COMP%]{transition:all .3s ease;filter:brightness(.9)}.movie-card[_ngcontent-%COMP%]:hover   .movie-poster[_ngcontent-%COMP%]{filter:brightness(1);transform:scale(1.03)}.movie-button[_ngcontent-%COMP%]{transition:all .2s ease}.movie-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #ffc1074d}button[_ngcontent-%COMP%], .btn-warning[_ngcontent-%COMP%]{background:#f7c948;color:#1e1e2f;border:none;padding:.6rem 1.2rem;font-weight:700;border-radius:6px;cursor:pointer;transition:all .3s ease}button[_ngcontent-%COMP%]:hover, .btn-warning[_ngcontent-%COMP%]:hover{background:#ffdf70;transform:translateY(-2px)}.btn-outline-warning[_ngcontent-%COMP%]{border:2px solid #f7c948;color:#f7c948;background-color:transparent;padding:.6rem 1.2rem;font-weight:700;transition:all .3s ease}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#f7c948;color:#1e1e2f;box-shadow:0 4px 8px #ffc1074d;transform:translateY(-2px)}.btn-outline-warning.active[_ngcontent-%COMP%]{background-color:#ffc107;color:#000;font-weight:700}.btn-close[_ngcontent-%COMP%]{filter:invert(1);opacity:1;transition:all .3s ease}.btn-close[_ngcontent-%COMP%]:hover{filter:invert(1) brightness(1.5);transform:rotate(90deg)}ul[_ngcontent-%COMP%]{padding-left:0}li[_ngcontent-%COMP%], .list-group-item[_ngcontent-%COMP%]{background-color:#b8b8d3;color:#e0e0e0;padding:.8rem;border-radius:8px;margin-bottom:.8rem;list-style:none;border-left:3px solid #f7c948;transition:all .2s ease}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#ffc1071a!important;transform:translate(5px)}.modal-dialog[_ngcontent-%COMP%]{background-color:tomato}.modal-content[_ngcontent-%COMP%]{background-color:#212529;border:2px solid #f7c948;border-radius:12px;box-shadow:0 4px 20px #0009}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid #f7c948;padding:1.2rem 1.5rem}.modal-title[_ngcontent-%COMP%]{color:#f7c948;font-size:1.4rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem;background-color:#0f0f13;font-style:italic}.modal-footer[_ngcontent-%COMP%]{border-top:2px solid #f7c948;padding:1rem 1.5rem;background-color:#282b2e}.form-label[_ngcontent-%COMP%]{color:#f7c948;font-weight:500;display:block;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{background-color:#434349;border:1px solid #555;color:#ffdf70;padding:.6rem 1rem;border-radius:8px;margin-bottom:1.2rem;width:100%;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#f7c948;color:#fff;box-shadow:0 0 0 .25rem #f7c94840;outline:none}textarea.form-control[_ngcontent-%COMP%]{min-height:100px;resize:vertical}[_ngcontent-%COMP%]::placeholder{color:#aaa;opacity:1}.filtro-genero-container[_ngcontent-%COMP%]{background-color:#212529cc;border:1px solid #ffc107}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1.5rem 0;list-style:none;padding:0}.page-item[_ngcontent-%COMP%]{margin:0 .15rem;perspective:1000px;background-color:#68665e}.page-link[_ngcontent-%COMP%]{display:block;padding:.25rem .5rem;font-size:.9rem;line-height:1.2;color:gold;background-color:transparent;border:1px solid rgba(255,215,0,.3);text-decoration:none;border-radius:2px;transition:all .3s ease;position:relative;overflow:hidden;cursor:pointer}.page-link[_ngcontent-%COMP%]:hover{color:#000;background-color:#ffc1071a;transform:translateY(-2px)}.page-link[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:gold;z-index:-1;animation:slideIn .3s forwards}']})};export{$ as HomeComponent};
