import{a as H}from"./chunk-RUZO6WAS.js";import{a as k,c as F,d as W,f as N,h as D,i as L,j as A,m as B,n as q,o as z,p as j,q as R,r as U,u as G}from"./chunk-3CW5SERO.js";import{a as Y}from"./chunk-HVYXXNEE.js";import"./chunk-IXDJKJJB.js";import{Aa as h,Cb as V,Db as I,Eb as T,Fa as y,Ja as C,Qa as u,Sa as e,Ta as n,Ua as P,Va as O,Wa as M,Xa as d,Z as m,_ as g,a as v,bb as w,cb as i,db as x,eb as E,gb as _,hb as f,ib as b,lb as S,wa as s}from"./chunk-7X4BFSSS.js";function K(a,l){if(a&1){let t=O();e(0,"div")(1,"section",32)(2,"strong",33),i(3,"Pel\xEDcula:"),n(),e(4,"span",34),i(5),n()(),e(6,"section",32)(7,"strong",33),i(8,"Usuario:"),n(),e(9,"span",34),i(10),n()(),e(11,"section",32)(12,"strong",33),i(13,"Opini\xF3n:"),n(),e(14,"span",34),i(15),n()(),e(16,"section",32)(17,"strong",33),i(18,"Nota:"),n(),e(19,"span",34),i(20),n()(),e(21,"div",35)(22,"button",36),M("click",function(){m(t);let o=d().index,c=d(2);return g(c.editarOpinion(o))}),i(23,"Editar"),n(),e(24,"button",37),M("click",function(){m(t);let o=d().index,c=d(2);return g(c.eliminarOpinion(o))}),i(25,"Eliminar"),n()()()}if(a&2){let t=d().$implicit;s(5),x(t.titulo),s(5),x(t.name),s(5),x(t.opinion),s(5),x(t.nota)}}function Q(a,l){if(a&1){let t=O();e(0,"form",38),M("ngSubmit",function(){m(t);let o=d(3);return g(o.guardarEdicion())}),e(1,"div",16)(2,"label",21),i(3,"Pel\xEDcula"),n(),e(4,"input",39),b("ngModelChange",function(o){m(t);let c=d(3);return f(c.opinionEditada.titulo,o)||(c.opinionEditada.titulo=o),g(o)}),n()(),e(5,"div",16)(6,"label",21),i(7,"Usuario"),n(),e(8,"input",40),b("ngModelChange",function(o){m(t);let c=d(3);return f(c.opinionEditada.name,o)||(c.opinionEditada.name=o),g(o)}),n()(),e(9,"div",16)(10,"label",21),i(11,"Opini\xF3n"),n(),e(12,"textarea",41),b("ngModelChange",function(o){m(t);let c=d(3);return f(c.opinionEditada.opinion,o)||(c.opinionEditada.opinion=o),g(o)}),n()(),e(13,"div",16)(14,"label",21),i(15,"Nota"),n(),e(16,"input",42),b("ngModelChange",function(o){m(t);let c=d(3);return f(c.opinionEditada.nota,o)||(c.opinionEditada.nota=o),g(o)}),n()(),e(17,"div",43)(18,"button",44),M("click",function(){m(t);let o=d(3);return g(o.cancelarEdicion())}),i(19,"Cancelar"),n(),e(20,"button",45),i(21,"Guardar"),n()()()}if(a&2){let t=d(3);s(4),_("ngModel",t.opinionEditada.titulo),s(4),_("ngModel",t.opinionEditada.name),s(4),_("ngModel",t.opinionEditada.opinion),s(4),_("ngModel",t.opinionEditada.nota)}}function X(a,l){if(a&1&&(e(0,"li",30),C(1,K,26,4,"div",31)(2,Q,22,4,"ng-template",null,1,S),n()),a&2){let t=l.index,r=w(3),o=d(2);s(),u("ngIf",o.editandoIndex!==t)("ngIfElse",r)}}function Z(a,l){if(a&1&&(e(0,"ul",28),C(1,X,4,2,"li",29),n()),a&2){let t=d();s(),u("ngForOf",t.opiniones)}}function $(a,l){a&1&&(e(0,"div",46)(1,"p",47),i(2,"No tienes opiniones a\xFAn."),n(),e(3,"p",48),P(4,"i",49),i(5," A\xF1ade opiniones para descubrir nuevas funciones. "),n()())}function ee(a,l){if(a&1&&(e(0,"li",54)(1,"strong"),i(2),n(),i(3),n()),a&2){let t=l.$implicit;s(2),x(t.titulo),s(),E(" - Nota: ",t.nota," ")}}function ne(a,l){if(a&1&&(e(0,"div",50)(1,"h4",51),i(2,"\u{1F3AC} Top 3 Pel\xEDculas Favoritas"),n(),e(3,"ol",52),C(4,ee,4,2,"li",53),n()()),a&2){let t=d();s(4),u("ngForOf",t.obtenerTop3())}}function te(a,l){if(a&1&&(e(0,"div",55)(1,"p",46),i(2," \u{1F4AC} Agrega "),e(3,"strong"),i(4),n(),i(5),e(6,"strong"),i(7,"Top 3 de favoritas"),n(),i(8,". "),n()()),a&2){let t=d();s(4),x(3-t.opiniones.length),s(),E(" opini\xF3n",t.opiniones.length===2?"":"es"," m\xE1s para ver tu ")}}function ie(a,l){if(a&1&&(e(0,"option",56),i(1),n()),a&2){let t=l.$implicit;u("value",t),s(),x(t)}}var J=class a{constructor(l,t){this.opinionesService=l;this.peliculaService=t}opiniones=[];editandoIndex=null;opinionEditada={};nuevaOpinion={titulo:"",name:"",opinion:"",nota:null};peliculas=[];ngOnInit(){this.cargarOpiniones(),this.peliculaService.getTitulos().subscribe(l=>{this.peliculas=l})}cargarOpiniones(){this.opiniones=this.opinionesService.obtenerOpiniones()}editarOpinion(l){this.editandoIndex=l,this.opinionEditada=v({},this.opiniones[l])}guardarEdicion(){this.editandoIndex!==null&&(this.opinionesService.actualizarOpinion(this.editandoIndex,this.opinionEditada),this.cargarOpiniones(),this.cancelarEdicion())}cancelarEdicion(){this.editandoIndex=null,this.opinionEditada={}}eliminarOpinion(l){confirm("\xBFEst\xE1s seguro de eliminar esta opini\xF3n?")&&(this.opinionesService.eliminarOpinion(l),this.opiniones=this.opinionesService.obtenerOpiniones())}obtenerTop3(){return[...this.opiniones].sort((l,t)=>t.nota-l.nota).slice(0,3)}agregarNuevaOpinion(){let{titulo:l,name:t,opinion:r,nota:o}=this.nuevaOpinion;l.trim()&&t.trim()&&r.trim()&&o!==null&&o>=1&&o<=10?(this.opinionesService.agregarOpinion(v({},this.nuevaOpinion)),this.nuevaOpinion={titulo:"",name:"",opinion:"",nota:null},this.cargarOpiniones()):alert("Por favor completa todos los campos correctamente")}static \u0275fac=function(t){return new(t||a)(h(H),h(Y))};static \u0275cmp=y({type:a,selectors:[["app-mis-opiniones"]],decls:44,vars:9,consts:[["noOpiniones",""],["editando",""],[1,"text-center","text-warning","mb-5"],[1,"text-center","mb-4"],["data-bs-toggle","modal","data-bs-target","#opinionModal",1,"btn","btn-warning"],[1,"container"],["class","list-group",4,"ngIf","ngIfElse"],["class","container text-white mb-5",4,"ngIf"],["class","container text-info mb-5 mt-2",4,"ngIf"],["id","opinionModal","tabindex","-1","aria-labelledby","opinionModalLabel","aria-hidden","true",1,"modal","fade","mt-5"],[1,"modal-dialog"],[1,"modal-content","bg-dark","text-white"],[1,"modal-header","border-warning","d-flex","justify-content-center","position-relative"],["id","opinionModalLabel",1,"modal-title","text-center","w-100"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","position-absolute","end-0","me-2",2,"filter","invert(1) grayscale(100%) brightness(200%)"],[1,"modal-body"],[1,"mb-3"],[1,"form-label","me-3"],["name","pelicula",1,"form-select","select-peliculas",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-label"],["type","text","name","usuario","placeholder","Tu nombre",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],["rows","3","name","opinion","placeholder","Tu opini\xF3n",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],["type","number","name","nota","min","1","max","10","placeholder","Tu nota (1-10)",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],[1,"modal-footer","border-warning"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-warning"],["type","button","data-bs-dismiss","modal",1,"btn","btn-warning",3,"click"],[1,"list-group"],["id","opinion-item","class","list-group-item opinion-item",4,"ngFor","ngForOf"],["id","opinion-item",1,"list-group-item","opinion-item"],[4,"ngIf","ngIfElse"],[1,"opinion-details"],[1,"title-container-opinion"],[1,"contenido-opinion"],[1,"opinion-actions"],[1,"btn","btn-warning","btn-sm","me-2",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"ngSubmit"],["type","text","name","titulo","required","",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],["type","text","name","name","required","",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],["name","opinion","required","",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],["type","number","name","nota","min","1","max","10","required","",1,"form-control","bg-secondary","text-white",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","submit",1,"btn","btn-warning"],[1,"text-center"],[1,"text-white"],[1,"text-color-opinion"],[1,"bi-chat-dots","me-1","mb-4"],[1,"container","text-white","mb-5"],[1,"text-warning","mb-3"],[1,"list-group","list-group-numbered"],["class","list-group-item opinion-item mb-1",4,"ngFor","ngForOf"],[1,"list-group-item","opinion-item","mb-1"],[1,"container","text-info","mb-5","mt-2"],[3,"value"]],template:function(t,r){if(t&1){let o=O();e(0,"h1",2),i(1,"Mis Opiniones"),n(),e(2,"div",3)(3,"button",4),i(4," A\xF1adir nueva opini\xF3n "),n()(),e(5,"div",5),C(6,Z,2,1,"ul",6)(7,$,6,0,"ng-template",null,0,S),n(),C(9,ne,5,1,"div",7)(10,te,9,2,"div",8),e(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h5",13),i(16,"Nueva Opini\xF3n"),n(),e(17,"button",14),i(18,"\xD7"),n()(),e(19,"div",15)(20,"div",16)(21,"label",17),i(22,"Pel\xEDcula"),n(),e(23,"select",18),b("ngModelChange",function(p){return m(o),f(r.nuevaOpinion.titulo,p)||(r.nuevaOpinion.titulo=p),g(p)}),e(24,"option",19),i(25,"Selecciona una pel\xEDcula"),n(),C(26,ie,2,2,"option",20),n()(),e(27,"div",16)(28,"label",21),i(29,"Usuario"),n(),e(30,"input",22),b("ngModelChange",function(p){return m(o),f(r.nuevaOpinion.name,p)||(r.nuevaOpinion.name=p),g(p)}),n()(),e(31,"div",16)(32,"label",21),i(33,"Opini\xF3n"),n(),e(34,"textarea",23),b("ngModelChange",function(p){return m(o),f(r.nuevaOpinion.opinion,p)||(r.nuevaOpinion.opinion=p),g(p)}),n()(),e(35,"div",16)(36,"label",21),i(37,"Nota"),n(),e(38,"input",24),b("ngModelChange",function(p){return m(o),f(r.nuevaOpinion.nota,p)||(r.nuevaOpinion.nota=p),g(p)}),n()()(),e(39,"div",25)(40,"button",26),i(41,"Cancelar"),n(),e(42,"button",27),M("click",function(){return m(o),g(r.agregarNuevaOpinion())}),i(43,"Enviar"),n()()()()()}if(t&2){let o=w(8);s(6),u("ngIf",r.opiniones.length>0)("ngIfElse",o),s(3),u("ngIf",r.opiniones.length>=3),s(),u("ngIf",r.opiniones.length>0&&r.opiniones.length<3),s(13),_("ngModel",r.nuevaOpinion.titulo),s(3),u("ngForOf",r.peliculas),s(4),_("ngModel",r.nuevaOpinion.name),s(4),_("ngModel",r.nuevaOpinion.opinion),s(4),_("ngModel",r.nuevaOpinion.nota)}},dependencies:[T,V,I,G,L,q,z,k,A,B,F,W,U,R,j,D,N],styles:[".text-center[_ngcontent-%COMP%]{text-align:center}.text-white[_ngcontent-%COMP%]{color:#fff!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107}.text-info[_ngcontent-%COMP%]{color:#17a2b8}.bg-dark[_ngcontent-%COMP%]{background-color:#343a40!important}.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.mb-4[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:3rem}.btn-warning[_ngcontent-%COMP%]{background-color:#ffd966;border-color:#ffd966;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#f7c948;border-color:#f1c232}.btn-danger[_ngcontent-%COMP%]{background-color:#e74c3c;border-color:#e74c3c}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c0392b;border-color:#c0392b}.btn-outline-warning[_ngcontent-%COMP%]{border-color:#ffc107;color:#ffc107}.btn-outline-warning[_ngcontent-%COMP%]:hover{background-color:#ffc107;color:#212529}.list-group-item.opinion-item[_ngcontent-%COMP%]{border:1px solid #f7c948;background-color:#1f1f1f;color:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 6px 12px #0000004d;transition:transform .2s ease,box-shadow .2s ease}.list-group-item.opinion-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 18px #00000080}.title-container-opinion[_ngcontent-%COMP%]{color:#f7c948;font-weight:600;font-size:1rem;margin-top:.8rem;display:flex;align-items:center}.contenido-opinion[_ngcontent-%COMP%]{color:#dcdcdc;font-size:1.1rem;margin-left:.5rem;margin-bottom:.5rem}.form-label[_ngcontent-%COMP%]{color:#ffc107;font-weight:500}.form-control[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;border:none;border-radius:5px}.form-control[_ngcontent-%COMP%]:focus{background-color:#2c3e50;border-color:#f39c12}.modal-content[_ngcontent-%COMP%]{background-color:#212529;border:2px solid #f7c948;border-radius:12px;box-shadow:0 4px 20px #0009}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid #f7c948}.modal-footer[_ngcontent-%COMP%]{border-top:2px solid #f7c948;background-color:#282b2e}.modal-title[_ngcontent-%COMP%]{color:#f7c948;font-size:1.4rem}.btn-close[_ngcontent-%COMP%]{filter:invert(1) grayscale(100%) brightness(200%)}.select-peliculas[_ngcontent-%COMP%]{background-color:#495057;color:#fff;border:2px solid #ffc107;border-radius:8px;padding:.5rem 1rem;cursor:pointer;transition:all .3s ease}.select-peliculas[_ngcontent-%COMP%]:hover, .select-peliculas[_ngcontent-%COMP%]:focus{background-color:#5a6268;border-color:#e0a800;box-shadow:0 0 0 .25rem #ffc10740;outline:none}.select-peliculas[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#495057;color:#fff}.text-color-opinion[_ngcontent-%COMP%]{color:#adb5bd;font-style:italic;font-size:1rem}.opinion-actions[_ngcontent-%COMP%]{margin-top:10px}.opinion-details[_ngcontent-%COMP%]{margin-bottom:15px}"]})};export{J as MisOpinionesComponent};
